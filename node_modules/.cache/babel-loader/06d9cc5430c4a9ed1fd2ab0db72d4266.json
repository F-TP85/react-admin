{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/space/style\";\nimport _Space from \"antd/es/space\";\nimport \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\Visual Studio Code\\\\B\\u7AD9\\u5B66\\u4E60\\\\react\\\\project\\\\react-admin\\\\src\\\\pages\\\\login\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport \"./index.css\";\nimport { Header } from \"antd/lib/layout/layout\";\nimport p1 from \"../../assets/img/logo.png\";\nimport axios_ from '../../api/index';\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.formRef = /*#__PURE__*/React.createRef();\n    this.layout = {\n      labelCol: {\n        span: 8\n      },\n      wrapperCol: {\n        span: 16\n      }\n    };\n    this.tailLayout = {\n      wrapperCol: {\n        offset: 8,\n        span: 16\n      }\n    };\n\n    this.onFinish = async values => {\n      let res = await axios_('/api1/login', {\n        username: values.username,\n        password: values.password\n      }, 'post');\n      console.log(res);\n    };\n\n    this.onFinishFailed = errorInfo => {\n      console.log(\"Failed:\", errorInfo);\n    };\n\n    this.onReset = () => {\n      this.formRef.current.resetFields();\n    };\n\n    this.usernameRules = [{\n      required: true,\n      whitespace: true,\n      message: \"请输入账户名!\"\n    }, {\n      min: 4,\n      message: \"用户名最少4位\"\n    }, {\n      max: 12,\n      message: \"用户名最多12位\"\n    }, {\n      pattern: /^[a-zA-Z0-9_-]+$/,\n      message: \"用户名只能由数字/字母/下划线组成\"\n    }];\n    this.passwordRules = [{\n      validator: (_, value) => {\n        if (value ? value.length >= 4 && value.length <= 12 : false) {\n          return Promise.resolve();\n        } else {\n          return Promise.reject('密码长度必须是4~12位');\n        }\n      }\n    }, {\n      validator: (_, value, callback) => {\n        let rules_ = /^[a-zA-Z0-9_-]+$/;\n\n        if (rules_.test(value)) {\n          // callback();//验证通过时调用\n          return Promise.resolve();\n        } else {\n          //callback(\"密码必须有数字、字母、下划线组成\")\n          return Promise.reject('密码长度必须是4~12位');\n        }\n      }\n    }];\n  }\n\n  componentDidMount() {\n    //挂载时 可以获取ref 这里就可以设置默认值\n    this.formRef.current.setFieldsValue({\n      username: \"admin\" // password: \"admin\"\n\n    }); //console.log(this.formRef.current.getFieldValue())//这里能够获取到初始化挂载的值\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: p1\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"React-\\u540E\\u53F0\\u7BA1\\u7406\\u7CFB\\u7EDF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login_\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u7528\\u6237\\u767B\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Space, {\n            size: \"middle\",\n            className: \"\",\n            children: /*#__PURE__*/_jsxDEV(_Spin, {\n              size: \"large\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Form, { ...this.layout,\n            name: \"basic\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: this.onFinish,\n            onFinishFailed: this.onFinishFailed,\n            ref: this.formRef,\n            children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n              label: \"Username\",\n              name: \"username\",\n              rules: this.usernameRules,\n              children: /*#__PURE__*/_jsxDEV(_Input, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n              label: \"Password\",\n              name: \"password\",\n              rules: this.passwordRules,\n              children: /*#__PURE__*/_jsxDEV(_Input.Password, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, { ...this.tailLayout,\n              name: \"remember\",\n              valuePropName: \"checked\",\n              children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                children: \"Remember me\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Form.Item, { ...this.tailLayout,\n              children: [/*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                children: \"\\u767B\\u5F55\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(_Button, {\n                htmlType: \"button\",\n                onClick: this.onReset,\n                children: \"Reset\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/Visual Studio Code/B站学习/react/project/react-admin/src/pages/login/index.jsx"],"names":["React","Component","Header","p1","axios_","Login","formRef","createRef","layout","labelCol","span","wrapperCol","tailLayout","offset","onFinish","values","res","username","password","console","log","onFinishFailed","errorInfo","onReset","current","resetFields","usernameRules","required","whitespace","message","min","max","pattern","passwordRules","validator","_","value","length","Promise","resolve","reject","callback","rules_","test","componentDidMount","setFieldsValue","render","remember"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./index.css\";\r\nimport { Header } from \"antd/lib/layout/layout\";\r\nimport p1 from \"../../assets/img/logo.png\";\r\nimport { Form, Input, Button, Checkbox, Spin, Space } from \"antd\";\r\nimport axios_ from '../../api/index'\r\n\r\nexport default class Login extends Component {\r\n  //ref注册表单 用于重置表单\r\n  formRef = React.createRef();\r\n\r\n  layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n  };\r\n\r\n  tailLayout = {\r\n    wrapperCol: { offset: 8, span: 16 },\r\n  };\r\n\r\n  //表单验证成功的回调\r\n  onFinish = async (values) => {\r\n      let res = await axios_('/api1/login',{\r\n      username:values.username,\r\n      password:values.password\r\n    },'post');\r\n    console.log(res)\r\n  };\r\n\r\n  //表单验证失败的回调\r\n  onFinishFailed = (errorInfo) => {\r\n    console.log(\"Failed:\", errorInfo);\r\n  };\r\n\r\n  //重置\r\n  onReset = () => {\r\n    this.formRef.current.resetFields();\r\n  };\r\n\r\n  //验证规则 分多个子项来写可以做到边输入边验证\r\n  //1.声明式表单验证：\r\n  usernameRules = [\r\n    { required: true, whitespace: true, message: \"请输入账户名!\" },\r\n    {min: 4,message: \"用户名最少4位\"},\r\n    {max: 12, message: \"用户名最多12位\"},\r\n    {pattern: /^[a-zA-Z0-9_-]+$/,message: \"用户名只能由数字/字母/下划线组成\"}\r\n  ]\r\n\r\n  //2. validator自定义式验证：\r\n  passwordRules = [\r\n    {\r\n        validator: (_, value) =>{\r\n          if(value?value.length >= 4 && value.length<=12:false) {\r\n              return Promise.resolve()\r\n          }else{\r\n              return Promise.reject('密码长度必须是4~12位')\r\n          }\r\n        }\r\n    },{\r\n      validator: (_,value,callback) => {\r\n        let rules_ = /^[a-zA-Z0-9_-]+$/\r\n        if(rules_.test(value)){\r\n          // callback();//验证通过时调用\r\n          return Promise.resolve()\r\n        } else {\r\n          //callback(\"密码必须有数字、字母、下划线组成\")\r\n          return Promise.reject('密码长度必须是4~12位')\r\n        }\r\n      }\r\n    }\r\n  ]\r\n\r\n  componentDidMount(){\r\n    //挂载时 可以获取ref 这里就可以设置默认值\r\n    this.formRef.current.setFieldsValue({\r\n      username: \"admin\",\r\n      // password: \"admin\"\r\n    })\r\n    //console.log(this.formRef.current.getFieldValue())//这里能够获取到初始化挂载的值\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"login\">\r\n        <Header className=\"header\">\r\n          <img src={p1} />\r\n          <h1>React-后台管理系统</h1>\r\n        </Header>\r\n        <div className=\"login_content\">\r\n          <div className=\"login_\">\r\n            <h2>用户登录</h2>\r\n\r\n            <Space size=\"middle\" className=\"\">\r\n              <Spin size=\"large\" />\r\n            </Space>\r\n\r\n            <Form {...this.layout} name=\"basic\" initialValues={{ remember: true }} onFinish={this.onFinish} onFinishFailed={this.onFinishFailed} ref={this.formRef}>\r\n              <Form.Item label=\"Username\" name=\"username\" rules={this.usernameRules}>\r\n                <Input />\r\n              </Form.Item>\r\n\r\n              <Form.Item label=\"Password\" name=\"password\" rules={this.passwordRules}>\r\n                <Input.Password />\r\n              </Form.Item>\r\n\r\n              <Form.Item {...this.tailLayout} name=\"remember\" valuePropName=\"checked\">\r\n                <Checkbox>Remember me</Checkbox>\r\n              </Form.Item>\r\n\r\n              <Form.Item {...this.tailLayout}>\r\n                <Button type=\"primary\" htmlType=\"submit\">登录</Button>\r\n                <Button htmlType=\"button\" onClick={this.onReset}>Reset</Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}